<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    
    <!-- firebase -->
    <script src="https://www.gstatic.com/firebasejs/5.3.1/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.2.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.2.0/firebase-firestore.js"></script>
    <script src="DatabaseHandling.js"></script>
    <script src="firebase.js"></script>
    <!-- firebase -->

    <!-- Bootstrap -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <!-- Bootstrap -->

    <!-- Font Awesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ"
        crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY"
        crossorigin="anonymous"></script>
    <!-- Font Awesome JS -->

    <!-- costum css -->
    <link rel="stylesheet" href="style.css">
    


    <!-- costum css -->

    <!-- <script>
        
        if ( window.screen.width > 450) {
       window.location.replace("notmobile.html");
        }
        
        </script> -->

    <script>

        initializeFirebase();
        // authfunc();
    </script>

    <!-- if user not logged in -->
    <script>


        firebase.auth().onAuthStateChanged(function (user) {
            if (user) {

            }
            else {
                window.location.replace("Login.html");
            }


        });
    </script>
    <!-- if user not logged in -->



</head>

<body class="cover">
        <div class="content">
    <!-- navigation bar -->
    <div id="mySidenav" class="sidenav">
        <p style="position: absolute; color: whitesmoke; top: 1px; left: 33px; font-size: 34px;">תפריט</p>

        <a href="javascript:void(0)" class="closebtn clickanamation" onclick="closeNav()">&times;</a>
        <a href="Homepage.html" class="clickanamation visitpage">דף בית</a>
        <a href="userprofile.html" class="clickanamation">פרופיל</a>
        <a href="rescu.html" class="clickanamation">תרגולות</a>
        <a href="generalinfo.html" class="clickanamation">מידע כללי</a>
        <a href="gant.html" class="clickanamation"> גאנט סגירות</a>
        <!-- <a href="gantmaster.html" class="clickanamation"> עדכוון גאנט</a> -->

    </div>
    <!-- navigation bar -->



    <div class="jumbotron curvy" style="text-align: center; margin-bottom: 0px; background-color:#343a40">

        <!-- navigation bar -->
        <span class="navhamburger clickanamation" onclick="openNav()">&#9776; </span>
        <!-- navigation bar -->

         <!-- logout -->
         <i class="fas fa-sign-out-alt clickanamation" style="font-size: 23px; position: absolute;left: 9px; color: #e8edf5;" onclick="logout()"></i>
         <!-- logout -->




        <h1 style=" color: #E9EFF6; display: inline-block;"> קריאת יעל</h1>
        <p style=" color: #f3f3f3; opacity: .6; font-size: 16px; font-weight: 100; margin-bottom: 0rem;">" הרים הגבוהים ליעלים, סלעים מחסה לשפנים "</p>
    </div>
    <div class="lds-roller centered" id="loader" style="top: 45%;">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>

    <div class="cardbetter" id="readytoload1" style="display: none;">
        <i id="replace1" class="fas fa-retweet clickanamation" style="font-size: 26px; color: #c1dcffb8; position: absolute; right: 20px; top: 5px;"></i>

        <div class="profile">

            <img src="images/man.png" class="thumbnail">

            <h1 id="name1" class="name"></h1>
            <p class="title" id="loadcard">מפקד</p>
            <p id="teamname1" class="title-team"></p>
            <a href="" class="btn btn-success phone" id="phonenum1"></a>

        </div>

    </div>
    <div id="readytoloadborder1" class="jborder" style="display: none;"></div>


    <div class="cardbetter" id="readytoload2" style="display: none;">
        <i id="replace2" class="fas fa-retweet clickanamation" style="font-size: 26px; color: #c1dcffb8; position: absolute; right: 20px; top: 5px;"></i>
        <div class="profile">

            <img src="images/user (3).png" class="thumbnail">

            <h1 id="name2" class="name"></h1>
            <p class="title">מגמקיסט</p>
            <p id="teamname2" class="title-team"></p>
            <a href="" class="btn btn-success phone" id="phonenum2"></a>
        </div>
    </div>
    <div id="readytoloadborder2" class="jborder" style="display: none;"></div>
    <div class="cardbetter" id="readytoload3" style="display: none;">
        <i id="replace3" class="fas fa-retweet clickanamation" style="font-size: 26px; color: #c1dcffb8; position: absolute; right: 20px; top: 5px;"></i>
        <!-- fas fa-chevron-circle-left -->
        <div class="profile">

            <img src="images/user (2).png" class="thumbnail">

            <h1 id="name3" class="name"></h1>
            <p class="title">מעגן</p>
            <p id="teamname3" class="title-team"></p>
            <a href="" class="btn btn-success phone" id="phonenum3"></a>
        </div>
    </div>
    </div>
    <footer>
        <div class="footer" id="footer" style="display: none">
        <p style="margin-bottom: 0px;padding-top: 7px;"> תומר למפרט - צוות פקאן &copy;</p>
    </div>
    </footer>


    <script>
        getKonanim()
            .then(function (konanim) {

                var konan1 = konanim[0];
                var konan2 = konanim[1];
                var konan3 = konanim[2];
                var userid = firebase.auth().currentUser.uid;


                getUser(konan1.userUID)
                    .then(function (user) {
                        document.getElementById("readytoload1").style.display = "flex";
                        document.getElementById("readytoloadborder1").style.display = "flex";
                        document.getElementById("loader").style.display = "none";
                        document.getElementById("name1").innerHTML = user.name;
                        document.getElementById("teamname1").innerHTML = user.team;
                        document.getElementById("phonenum1").innerHTML = user.phoneNumber;
                        document.getElementById("phonenum1").href = "tel:" + user.phoneNumber;
                        document.getElementById("footer").style.display = "block";



                        document.getElementById("replace1").addEventListener("click", function () {

                            if (konan1.userUID != userid && konan2.userUID != userid && konan3.userUID != userid) {


                                replaceKonan(user.userUID, userid);
                            }
                            else {
                                // alert("you are alredy konan")
                                // document.getElementById("replace1").style.color = "red";
                                var id = "replace1";
                                redalert(id);
                                setTimeout(function () { document.getElementById(id).style.color = "#c1dcffb8"; }, 250);
                            }

                        });

                    });


                getUser(konan2.userUID)
                    .then(function (user) {
                        document.getElementById("readytoload2").style.display = "flex";
                        document.getElementById("readytoloadborder2").style.display = "flex";
                        document.getElementById("name2").innerHTML = user.name;
                        document.getElementById("teamname2").innerHTML = user.team;
                        document.getElementById("phonenum2").innerHTML = user.phoneNumber;
                        document.getElementById("phonenum2").href = "tel:" + user.phoneNumber;

                        document.getElementById("replace2").addEventListener("click", function () {

                            if (konan1.userUID != userid && konan2.userUID != userid && konan3.userUID != userid) {


                                replaceKonan(user.userUID, userid);
                            }
                            else {
                                // alert("you are alredy konan")
                                // document.getElementById("replace2").style.color = "red";
                                var id = "replace2";
                                redalert(id);
                                setTimeout(function () { document.getElementById(id).style.color = "#c1dcffb8"; }, 250);
                            }
                        });

                    });

                getUser(konan3.userUID)
                    .then(function (user) {
                        document.getElementById("readytoload3").style.display = "flex";
                        document.getElementById("name3").innerHTML = user.name;
                        document.getElementById("teamname3").innerHTML = user.team;
                        document.getElementById("phonenum3").innerHTML = user.phoneNumber;
                        document.getElementById("phonenum3").href = "tel:" + user.phoneNumber;

                        document.getElementById("replace3").addEventListener("click", function () {

                            if (konan1.userUID != userid && konan2.userUID != userid && konan3.userUID != userid) {


                                replaceKonan(user.userUID, userid);
                            }
                            else {
                                // alert("you are alredy konan")
                                // document.getElementById("replace3").style.color = "red";
                                var id = "replace3";
                                redalert(id);
                                setTimeout(function () { document.getElementById(id).style.color = "#c1dcffb8"; }, 250);
                            }
                        });


                    });
            });


    </script>
    <script>
        function redalert(id) {
            document.getElementById(id).style.color = "red";

        }
       



    </script>
    <script>







// var konanimGlobal = [];

// getKonanim()
//     .then(function (konanim) {

//         konanimGlobal = konanim;

//         var i = 0;

//         konanim.forEach(konan => {

//             getUser(konan.userUID)
//                 .then(function (user) {
//                     var element = "<div>";
//                     element += "<h1>" + user.name + "</h1>";
//                     element += "<h2>" + user.team + "</h2>";
//                     element += "<h3>" + user.phoneNumber + "</h3>";
//                     element += "</div>";

//                     document.body.innerHTML += element;

//                     // there might be a problem with more then one button
//                     var btn = document.createElement("BUTTON");
//                     btn.id = i;
//                     var text = document.createTextNode("Replace " + user.name + " " + firebase.auth().currentUser.uid);
//                     btn.appendChild(text);

//                     document.body.appendChild(btn);

//                     i += 1;
//                 });
//         });

//         document.addEventListener('click', function (event) {

//             let konan = konanimGlobal[event.target.id];

//             replaceKonan(konan.userUID, firebase.auth().currentUser.uid);

//         }, false);
//     })
//     .catch(function (error) {
//         alert("Failed! " + error);
//     })
    </script>


    <!-- navigation bar -->

    <script>
        function openNav() {
            document.getElementById("mySidenav").style.width = "200px";
            document.getElementById("mySidenav").style.opacity = "1";
        }

        function closeNav() {
            document.getElementById("mySidenav").style.width = "0";
            document.getElementById("mySidenav").style.opacity = "0";
        }
    </script>
    <!-- navigation bar -->


</body>


</html>